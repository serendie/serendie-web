---
export const prerender = true;

import TopLayout from "@/layouts/TopLayout.astro";
import { LinkContent } from "@/components/toppage/LinkContent";
import Showcase from "@/components/toppage/Showcase.astro";
import { styled } from "styled-system/jsx";
import ReleaseNote from "@/components/toppage/ReleaseNote.astro";
import Contact from "@/components/toppage/Contact.astro";
import { BackgroundShape } from "@/components/toppage/BackgroundShape";
import { Header } from "@/components/toppage/Header";
import { getLangFromUrl, useTranslations, useLocalePath } from "@/i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const localePath = useLocalePath(lang);

import IconAccordion from "@/assets/toppage/icons/accordion.svg?raw";
import IconSearch from "@/assets/toppage/icons/search.svg?raw";
import IconButton from "@/assets/toppage/icons/button.svg?raw";
import IconColor from "@/assets/toppage/icons/color-.svg?raw";
import IconDesignTokens from "@/assets/toppage/icons/design-tokens.svg?raw";
import IconDesign from "@/assets/toppage/icons/design.svg?raw";
import IconDev from "@/assets/toppage/icons/dev.svg?raw";
import IconAIAgent from "@/assets/toppage/icons/ai-agents.svg?raw";
import IconDimension from "@/assets/toppage/icons/dimemntion.svg?raw";
import IconElevation from "@/assets/toppage/icons/elevation.svg?raw";
import IconIcon from "@/assets/toppage/icons/icon.svg?raw";
import IconIllustration from "@/assets/toppage/icons/illustration.svg?raw";
import IconList from "@/assets/toppage/icons/list.svg?raw";
import IconSeeAll from "@/assets/toppage/icons/see-all.svg?raw";
import IconSelect from "@/assets/toppage/icons/select.svg?raw";
import IconTabs from "@/assets/toppage/icons/tabs.svg?raw";
import IconTextField from "@/assets/toppage/icons/text-field.svg?raw";
import IconTheming from "@/assets/toppage/icons/theming.svg?raw";
import IconTypography from "@/assets/toppage/icons/typography.svg?raw";

const Container = styled("div", {
  base: {
    px: "24px",
    textStyle: "_Web.body.small.PC.R",
    maxWidth: "calc(1640px + 300px)",
    mx: "auto",
    expanded: {
      px: "150px",
      lgDown: {
        px: "48px",
      },
    },
  },
});

const content = [
  {
    titleEn: t("nav.getStarted"),
    description: "",
    links: [
      {
        title: t("footer.design"),
        href: localePath("get-started/design"),
        illustration: IconDesign,
      },
      {
        title: t("footer.development"),
        href: localePath("get-started/dev"),
        illustration: IconDev,
      },
      {
        title: "AIエージェント",
        href: "/get-started/ai-agent/mcp-server",
        illustration: IconAIAgent,
      }
    ],
  },
  {
    titleEn: t("nav.foundations"),
    description: "",
    links: [
      {
        title: t("footer.designTokens"),
        href: localePath("foundations/design-tokens"),
        illustration: IconDesignTokens,
      },
      {
        title: t("footer.color"),
        href: localePath("foundations/color"),
        illustration: IconColor,
      },
      {
        title: t("footer.dataVisualization"),
        href: localePath("foundations/data-visualization"),
        illustration: IconDimension,
      },
      {
        title: t("footer.theming"),
        href: localePath("foundations/theming"),
        illustration: IconTheming,
      },
      {
        title: t("footer.typography"),
        href: localePath("foundations/typography"),
        illustration: IconTypography,
      },
      {
        title: t("footer.dimension"),
        href: localePath("foundations/dimension"),
        illustration: IconDimension,
      },
      {
        title: t("footer.elevation"),
        href: localePath("foundations/elevation"),
        illustration: IconElevation,
      },
      {
        title: t("footer.icon"),
        href: localePath("foundations/icon"),
        illustration: IconIcon,
      },
      {
        title: t("footer.illustration"),
        href: localePath("foundations/illustration"),
        illustration: IconIllustration,
      },
    ],
  },
  {
    titleEn: t("nav.components"),
    description: "",
    links: [
      {
        title: "Accordion",
        href: localePath("components/accordion"),
        illustration: IconAccordion,
      },
      {
        title: "Button",
        href: localePath("components/button"),
        illustration: IconButton,
      },
      {
        title: "List",
        href: localePath("components/list"),
        illustration: IconList,
      },
      {
        title: "Search",
        href: localePath("components/search"),
        illustration: IconSearch,
      },
      {
        title: "Select",
        href: localePath("components/select"),
        illustration: IconSelect,
      },
      {
        title: "Tabs",
        href: localePath("components/tabs"),
        illustration: IconTabs,
      },
      {
        title: "TextField",
        href: localePath("components/text-field"),
        illustration: IconTextField,
      },
      {
        title: t("footer.seeAll"),
        href: localePath("components"),
        illustration: IconSeeAll,
      },
    ],
  },
];
---

<TopLayout>
  <Header client:load lang={lang} />

  <Container data-name="top-container">
    <LinkContent content={content} client:idle />
    <Showcase />
    <ReleaseNote />
    <Contact />
  </Container>

  <BackgroundShape client:idle />

  <style is:global>
    @layer utilities {
      /* テーマによってsvgを内包するdivのmix-blend-modeを変更 */
      [data-name="top-background-shape"] > div {
        mix-blend-mode: multiply;
        [data-panda-theme="kurikawa"] & {
          mix-blend-mode: normal;
        }
        [data-panda-theme="sumire"] & {
          mix-blend-mode: normal;
        }
      }

      /*
      * getStartedのアイコンの色をテーマによって変更
      */
      :where(:root, :host) {
        --ex-getStartedIcon: var(--sd-reference-color-scale-purple-400);
      }
      [data-panda-theme="asagi"] {
        --ex-getStartedIcon: var(--sd-reference-color-scale-green-500);
      }
      [data-panda-theme="tsutuji"] {
        --ex-getStartedIcon: var(--sd-reference-color-scale-blue-400);
      }
      [data-panda-theme="kurikawa"] {
        --ex-getStartedIcon: var(--sd-reference-color-scale-yellow-400);
      }
      [data-panda-theme="sumire"] {
        --ex-getStartedIcon: var(--sd-reference-color-scale-blue-400);
      }
    }
  </style>
</TopLayout>
